---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by User.
--- DateTime: 26.10.2024 12:08
---
function RepairAllBuilds(pid,bonus)
    local units=FindAllUnitsForPlayerID(pid)
    local bk=0
    for i=1,#units do
        if IsUnitType(units[i],UNIT_TYPE_STRUCTURE) or IsUnitType(units[i],UNIT_TYPE_MECHANICAL) then
            if GetUnitLifePercent(units[i])>=99 then
                bk=bk+1
            else
                DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",units[i],"origin"))
            end
            HealUnit(units[i],99999)
        end
    end
    local total=bk*bonus
    SetPlayerState(Player(pid),PLAYER_STATE_RESOURCE_LUMBER,GetPlayerState(Player(pid),PLAYER_STATE_RESOURCE_LUMBER)+total)
    FlyTextTagLumberBounty(GetRandomTownHall(pid),"+"..I2S(R2I(total)),Player(pid))
    CreateFrameBonusTimed(pid,total)
end